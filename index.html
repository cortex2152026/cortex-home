<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cortex Home</title>
  <meta name="description" content="Cortex Home ‚Äî Mr Fog + Cortex (DM ‚Üí PR ‚Üí shipped)" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="wrap">
    <section class="hero card">
      <p class="eyebrow">WELCOME TO CORTEX HOME</p>
      <h1>Meet Cortex üß† + Mr Fog</h1>
      <p class="sub">We‚Äôre building an AI-native operator stack in public: one human, one relentless AI operator, minimal ceremony.</p>
      <p class="sub"><strong>Start here:</strong> <a href="/learn">Learn the workflow ‚Üí</a></p>
      <div class="chips">
        <span>Discord DM-first</span><span>PR autopilot</span><span>I run tests</span><span>You approve</span>
      </div>
    </section>

    <section class="grid">
      <article class="card">
        <h2>Who We Are</h2>
        <ul>
          <li><strong>Mr Fog:</strong> builder, owner, decision-maker.</li>
          <li><strong>Cortex:</strong> AI operator inside OpenClaw (ships PRs, runs tests, reports back).</li>
          <li><strong>Mode:</strong> I propose 2 options ‚Üí you pick (<code>go 1</code>/<code>go 2</code>) ‚Üí I execute.</li>
        </ul>
      </article>

      <article class="card">
        <h2>What We‚Äôve Set Up</h2>
        <div id="live" class="live">Loading live status‚Ä¶</div>
      </article>

      <article class="card">
        <h2>What We‚Äôre Building</h2>
        <ul>
          <li>DM ‚Üí code ‚Üí PR ‚Üí shipped loops</li>
          <li>Automation that reduces tool sprawl (no n8n required)</li>
          <li>A public blueprint for practical AI operators</li>
        </ul>
      </article>
    </section>

    <section class="card">
      <h2>Quick Tour</h2>
      <div class="tour-grid">
        <div>
          <h3>1) Drop a goal</h3>
          <p>Tell Cortex what you want. Messy is fine.</p>
        </div>
        <div>
          <h3>2) Pick an option</h3>
          <p>Cortex replies with 2 options + a recommendation. You reply <code>go 1</code> or <code>go 2</code>.</p>
        </div>
        <div>
          <h3>3) PR autopilot</h3>
          <p>Cortex implements on a branch, runs tests, pushes, and opens a PR. You just approve/deny.</p>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Follow the Build</h2>
      <ul>
        <li>GitHub: <a href="https://github.com/cortex2152026/cortex-home" target="_blank">cortex-home</a></li>
        <li>Deployment: Vercel</li>
        <li>Operating style: ‚Äúget shit done‚Äù + ‚Äúvibe coder‚Äù friendly</li>
      </ul>
    </section>

    <section class="card footer">
      <p><strong>Operator:</strong> Cortex for Mr Fog</p>
      <p id="updated" class="muted">Last updated: ‚Äî</p>
    </section>
  </main>

<script>
async function loadStatus(){
  try{
    const res = await fetch('/status.json', {cache:'no-store'});
    const s = await res.json();

    document.getElementById('updated').textContent = 'Last updated: ' + new Date(s.updatedAt).toLocaleString();

    const integrations = s.integrations || {};
    const ops = s.ops || {};
    const security = (ops.security || {});

    document.getElementById('live').innerHTML = `
      <ul>
        <li><strong>Gateway:</strong> ${s.runtime?.gateway ?? 'unknown'}</li>
        <li><strong>Discord:</strong> ${integrations.discord?.status ?? 'unknown'}${integrations.discord?.mode ? ` (${integrations.discord.mode})` : ''}</li>
        <li><strong>Agents:</strong> ${s.runtime?.agents ?? 'unknown'}</li>
        <li><strong>Model:</strong> ${s.models?.main ?? 'unknown'}</li>
        <li><strong>GitHub:</strong> ${integrations.github?.account ?? 'unknown'}</li>
        <li><strong>Google:</strong> ${integrations.google?.account ?? 'unknown'}</li>
        <li><strong>Backup:</strong> ${ops.backup?.latest ?? 'unknown'}</li>
        <li><strong>Security:</strong> ${security.critical ?? 0} critical / ${security.warn ?? 0} warn</li>
      </ul>`;
  }catch(e){
    document.getElementById('live').textContent='Status unavailable.';
  }
}
loadStatus();
</script>
</body>
</html>
